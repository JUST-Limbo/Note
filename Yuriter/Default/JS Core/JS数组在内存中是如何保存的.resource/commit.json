{"compress":true,"commitItems":[["5d092dfa-a9a8-43bb-8a7f-ff90da50fac1",1584944518273,"",[[1584944465340,["Administrator@WIN-T3FPCJLTUH1",[[1,0,"# Javascript中的数组在内存中是如何保存的？"]],[0,0],[27,27]]],[1584944467413,["Administrator@WIN-T3FPCJLTUH1",[[1,27,"\n\n"]],[27,27],[28,28]]],[1584944467831,["Administrator@WIN-T3FPCJLTUH1",[[1,29,"\n"]],[28,28],[29,29]]],[1584944480285,["Administrator@WIN-T3FPCJLTUH1",[[1,29,"大家在日常编码中，最长碰到的是数组和对象的操作，各种增删改查，但是你真的了解数组和对象么？数组的最基本概念就不解释了，详情看MDN文档——[数组](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array)\n今天我们主要讲一下数组的内存模型。\n\n# 数组的内存模型\n\nJavascript的内存分为堆内存和栈内存，数组作为对象，在建立后存储在堆内存中。\n任何计算机语言内存的分配都要经历三个阶段\n\n* * *\n\n*   **分配内存**\n*   **对内存进行读、写**\n*   **释放内存（垃圾回收）**\n\n* * *\n\n本文主要针对数组的内存分配进行解释。\nJavascript中数组有几个不同于其他语言数组的特点\n\n* * *\n\n*   **数组中可以存放不同的数据结构**，可以存放数组、对象、Number、Undefined、Null、String、Symbol、Boolean、Function等等。\n*   **数组的index是字符串类型的**，之所以你可以通过arr[1]，获得对应的数据，是因为Javascript自动将数字转化为字符串。\n\n* * *\n\n数组本来应该是一个**连续的内存分配**，但是在Javascript中不是连续分配的，而是类似**哈希映射**的方式存在的。\n对于上述的实现方式，熟悉数据结构的同学应该知道，**对于读取操作，哈希表的效率并不高，而修改删除的效率比较高**。\n现在浏览器为了优化其操作，对数组的创建时候的内存分配进行了优化：\n\n* * *\n\n*   对于同构的数组，也就是，数组中元素类型一致，会创建连续的内存分配\n*   对于不同构数组，按照原来的方式创建。\n*   如果你想插入一个异构数据，那么就会重新解构，通过哈希映射的方式创建\n\n* * *\n\n为了进一步优化功能的实现，Javascript中出现了[ArrayBuffer](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays)，它可以创建连续的内存供编程人员使用。\n\n* * *\n\n*   ArrayBuffer是创建一块连续的内存，不能直接操作\n*   通过视图对分配的内存进行读写操作\n\n* * *\n\n显而易见，如果通过ArrayBuffer创建的数组进行遍历操作，速度更快。\n参考文章：\n[数组深度解析](http://voidcanvas.com/javascript-array-evolution-performance/)"]],[29,29],[1159,1159]]]],null,"Administrator@WIN-T3FPCJLTUH1"]]}